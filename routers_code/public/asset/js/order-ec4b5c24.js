webpackJsonp([8,0],{0:function(module,exports,t){(function($){"use strict";var e=t(2),n=t(5),o=t(4),i=t(6),a=t(3);t(7),t(8),t(9),t(23);var s=new e.RestApi,r=s.getParameter("id"),c=function(){new n.Header("module",".header",function(){$("#top-nav-login").hide(),$("div[class=webNav] .page-title").text("订单详情").show()}),new o.Footer("module",".footer")},l=function(t){1==t&&$("#payment-type-id").text("付款(微信)")},d=function(t){if(null!=t){$("#address-user-name").text(t.receivername+"("+t.receiverphone+")");var e=t.provincename+t.cityname+t.districtname+t.detailaddress;$("#address").text(e)}},u=function(t){l(t.paymenttypeid),d(t.address),$("#total-price").text("¥"+t.totalprice);var e=t.userSubOrderList,n=e[0],o='<tr>\n        <td colspan="4" style="color:grey;border: 1px solid #ccc;">\n          <span>'+t.createtime+'</span>\n          <span style="margin-left: 10px;">订单号：'+t.ordercode+'</span>\n        </td>\n      </tr>\n      <tr style="border:1px solid #ccc;border-radius:5px;text-align: left; margin:10px auto;">\n        <td>\n          <div class="row col-md-2" style="width: 100px;">\n            <a href="javascript:void(0);">\n              <img src="'+n.images[0]+'" width="80" height="80">\n            </a>\n          </div>\n          <div class="col-md-10">'+n.goodsname+(""!=t.ordercomment?"("+t.ordercomment+")":"")+'</div>\n        </td>\n        <td class="text-center">￥'+n.price+'</td>\n        <td class="text-center">'+n.amount+'</td>\n        <td class="text-center">\n          <div class="row">￥'+n.subtotalprice+"</div>\n        </td>\n      </tr>";$("#trade-list").append(o),$("#total-price1").text("¥"+t.totalprice),$("#last-total-price").text("¥"+t.totalprice),$("#actual-amount").text("¥"+t.totalprice)},h=function(){s.get("/v1/order?id="+r).then(function(t){if(0!=t.code)return(new a.Toast).show({content:"获取订单信息失败!"});var e=t.data;u(e)},function(t,e){if(403==t.status){var n=new i.Auth;return n.deleteUserInfo(),window.location.href="./login.html?ref="+window.location.href}console.log(e)})};$(function(){c(),h()})}).call(exports,t(1))},4:function(module,exports,t){(function($){"use strict";var t=function(){function t(module,t,e){var n=this;this.selector="footer",this.template="",this.className="",this.isSelectorLoaded=!1,this.className=t,this.template="./"+module+"/"+this.selector+".html",$.when($.ajax(this.template)).then(function(o){$(t).html(o),n.isSelectorLoaded=!0,n.init(),e&&e()},function(t){console.log(t)})}return t.prototype.init=function(){},t}();exports.Footer=t}).call(exports,t(1))},5:function(module,exports,t){(function($){"use strict";var e=t(6),n=t(2),o=t(3),i=function(){function t(module,t,i){this.selector="header",this.template="",this.className="",this.isSelectorLoaded=!1,this.auth=new e.Auth,this.toast=new o.Toast,this.restApi=new n.RestApi,this.className=t;var a=this;this.template="./"+module+"/"+this.selector+".html",$.when($.ajax(this.template)).then(function(e){$(t).html(e),a.isSelectorLoaded=!0,i&&i(),a.init()},function(t,e){console.log(e)})}return t.prototype.setLoginStatus=function(t){t?($("#top-nav-login").show(),$("#top-nav-logout").hide(),$("#top-nav-login #login-name").text("您好，"+t)):($("#top-nav-login").hide(),$("#top-nav-logout").show())},t.prototype.init=function(){var t=this,e=this.auth.getUserInfo();if(null==e){var n=this.restApi.getParameter("type");"1"==n?this.restApi.get("/v1/user").then(function(e){var n=null;if(0==e.code){var o=e.data,i=o?o.username:null;i?(t.auth.addUserInfo({userid:o.id,username:i,nickname:o.nickname}),n=o.nickname):console.log(e)}else t.toast.show({content:"登录失败"+e.msg});t.setLoginStatus(n)}):this.setLoginStatus(null)}else this.setLoginStatus(e.nickname);$("#top-nav-login #safety-quit").on("click",function(e){t.restApi.logout().then(function(e){t.auth.deleteUserInfo(),window.location.href="/login.html"},function(e,n){t.auth.deleteUserInfo(),window.location.href="/login.html"})})},Object.defineProperty(t.prototype,"auth1",{get:function(){return this.auth},set:function(t){this.auth=t},enumerable:!0,configurable:!0}),t}();exports.Header=i}).call(exports,t(1))},8:7,23:7});
//# sourceMappingURL=order-ec4b5c24.js.map